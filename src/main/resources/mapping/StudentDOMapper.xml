<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zaozao.dao.StudentDOMapper">
    <resultMap id="BaseResultMap" type="com.zaozao.dataobject.StudentDO">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="gender" jdbcType="TINYINT" property="gender"/>
        <result column="student_identity" jdbcType="VARCHAR" property="studentIdentity"/>
        <result column="student_no" jdbcType="VARCHAR" property="studentNo"/>
        <result column="class_id" jdbcType="INTEGER" property="classId"/>
        <result column="school_id" jdbcType="INTEGER" property="schoolId"/>
        <result column="parent_phone_num" jdbcType="VARCHAR" property="parentPhoneNum"/>
        <result column="parent_name" jdbcType="VARCHAR" property="parentName"/>
        <result column="guardian" jdbcType="VARCHAR" property="guardian"/>
        <result column="residence" jdbcType="TINYINT" property="residence"/>
        <result column="school_shuttle" jdbcType="TINYINT" property="schoolShuttle"/>
        <result column="delete_status" jdbcType="VARCHAR" property="deleteStatus"/>
        <result column="wechat_open_id" jdbcType="VARCHAR" property="wechatOpenId"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        id, name, gender, student_identity,student_no, class_id, school_id, parent_phone_num, parent_name,
        guardian, residence, school_shuttle,delete_status,wechat_open_id
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        select
        <include refid="Base_Column_List"/>
        from student
        where id = #{id,jdbcType=INTEGER}
    </select>
    <select id="selectByWechatOpenId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where wechat_open_id = #{openId,jdbcType=VARCHAR} and delete_status =
        #{deleteStatus,jdbcType=VARCHAR}
    </select>
    <select id="selectByNameAndPhone" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where name = #{name,jdbcType=VARCHAR} and parent_phone_num=#{parentPhone,jdbcType=VARCHAR} and delete_status =
        #{deleteStatus,jdbcType=VARCHAR}
    </select>
    <select id="selectByNameAndOpenId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where name = #{name,jdbcType=VARCHAR} and wechat_open_id = #{openId,jdbcType=VARCHAR} and delete_status =
        #{deleteStatus,jdbcType=VARCHAR}
    </select>
    <select id="listStudentBySchoolAndClass" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where school_id = #{schoolId,jdbcType=INTEGER} and class_id=#{classId,jdbcType=INTEGER} and delete_status =
        #{deleteStatus,jdbcType=VARCHAR}
        order by name
    </select>
    <select id="listStudent" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where delete_status = #{deleteStatus,jdbcType=VARCHAR}
        order by school_id and class_id
    </select>
    <select id="listStudentByDynamicQuery" parameterType="java.util.Map" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where delete_status = #{deleteStatus,jdbcType=VARCHAR}
        <if test="classId != null and classId != '' ">
            and class_id = #{classId,jdbcType=INTEGER}
        </if>
        <if test="name != null and name != '' ">
            and name = #{name,jdbcType=VARCHAR}
        </if>
        <if test="gender != null and gender != '' ">
            and gender = #{gender,jdbcType=TINYINT}
        </if>
        <if test="studentNo != null and studentNo != '' ">
            and student_no = #{studentNo,jdbcType=VARCHAR}
        </if>
        <if test="residence != null and residence != '' ">
            and residence = #{residence,jdbcType=TINYINT}
        </if>
        <if test="schoolShuttle != null and schoolShuttle != '' ">
            and school_shuttle = #{schoolShuttle,jdbcType=TINYINT}
        </if>
        <if test="classIdList != null and classIdList.size()>0 ">
            and class_id in
            <foreach collection="classIdList" index="index" item="classId" open="(" separator="," close=")">
                #{classId,jdbcType=INTEGER}
            </foreach>
        </if>

        order by school_id and class_id
    </select>
    <select id="countAmountByDynamic" parameterType="java.util.Map" resultType="java.lang.Integer">
        select COALESCE(count(*),0)
        from student
        where delete_status = #{deleteStatus,jdbcType=VARCHAR}
        <if test="schoolIdList != null and schoolIdList.size()>0 ">
            and school_id in
            <foreach collection="schoolIdList" index="index" item="schoolId" open="(" separator="," close=")">
                #{schoolId}
            </foreach>
        </if>
    </select>
    <select id="listStudentBySchool" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student where school_id = #{schoolId,jdbcType=INTEGER} and delete_status = #{deleteStatus,jdbcType=VARCHAR}
        order by class_id
    </select>
    <select id="listStudentBySchoolIdList" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where delete_status = #{deleteStatus,jdbcType=VARCHAR} and school_id in
        <foreach collection="schoolIdList" index="index" item="schoolId" open="(" separator="," close=")">
            #{schoolId}
        </foreach>
        order by school_id and class_id
    </select>
    <select id="getStudentBySchoolAndClassAndStudentNo" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where school_id = #{schoolId,jdbcType=INTEGER} and class_id=#{classId,jdbcType=INTEGER} and
        student_no=#{studentNo,jdbcType=VARCHAR} and delete_status = #{deleteStatus,jdbcType=VARCHAR} order by name
    </select>
    <select id="getStudentByStudentNo" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student
        where school_id = #{schoolId,jdbcType=INTEGER} and student_no=#{studentNo,jdbcType=VARCHAR} and delete_status
        = #{deleteStatus,jdbcType=VARCHAR}
    </select>
    <select id="selectAmountByStudentNo" resultType="java.lang.Integer">
        select count(*)
        from student
        where school_id = #{schoolId,jdbcType=INTEGER}
          and class_id = #{classId,jdbcType=INTEGER}
          and student_no = #{studentNo,jdbcType=VARCHAR}
          and delete_status = #{deleteStatus,jdbcType=VARCHAR}
    </select>
    <select id="selectAmountByClass" resultType="java.lang.Integer">
        select count(*)
        from student
        where class_id = #{classId,jdbcType=INTEGER}
          and delete_status = #{deleteStatus,jdbcType=VARCHAR}
    </select>
    <select id="selectByClassIdList" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student where delete_status = #{deleteStatus,jdbcType=VARCHAR} and class_id in
        <foreach collection="classIdList" index="index" item="classId" open="(" separator="," close=")">
            #{classId}
        </foreach>
    </select>
    <select id="selectByPrimaryKeyList" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from student where id in
        <foreach collection="idList" index="index" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        delete from student
        where id = #{id,jdbcType=INTEGER}
    </delete>

    <delete id="deleteStudentBySchoolId" parameterType="java.lang.Integer">
        delete
        from student
        where school_id = #{schoolId,jdbcType=INTEGER}
    </delete>

    <delete id="deleteByStudentNo" parameterType="java.lang.String">
        delete
        from student
        where student_no = #{studentNo,jdbcType=VARCHAR}
    </delete>

    <insert id="insert" parameterType="com.zaozao.dataobject.StudentDO" keyProperty="id" useGeneratedKeys="true">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        insert into student (id, name, gender,student_identity,
        student_no, class_id, school_id,
        parent_phone_num, parent_name, guardian,
        residence, school_shuttle,delete_status,wechat_open_id)
        values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{gender,jdbcType=TINYINT},
        #{studentIdentity,jdbcType=VARCHAR},#{studentNo,jdbcType=VARCHAR}, #{classId,jdbcType=INTEGER},
        #{schoolId,jdbcType=INTEGER},
        #{parentPhoneNum,jdbcType=VARCHAR}, #{parentName,jdbcType=VARCHAR}, #{guardian,jdbcType=VARCHAR},
        #{residence,jdbcType=TINYINT},
        #{schoolShuttle,jdbcType=TINYINT},#{deleteStatus,jdbcType=VARCHAR},#{wechatOpenId,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.zaozao.dataobject.StudentDO" keyProperty="id"
            useGeneratedKeys="true">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        insert into student
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="name != null">
                name,
            </if>
            <if test="gender != null">
                gender,
            </if>
            <if test="studentIdentity != null">
                student_identity,
            </if>
            <if test="studentNo != null">
                student_no,
            </if>
            <if test="classId != null">
                class_id,
            </if>
            <if test="schoolId != null">
                school_id,
            </if>
            <if test="parentPhoneNum != null">
                parent_phone_num,
            </if>
            <if test="parentName != null">
                parent_name,
            </if>
            <if test="guardian != null">
                guardian,
            </if>
            <if test="residence != null">
                residence,
            </if>
            <if test="schoolShuttle != null">
                school_shuttle,
            </if>
            <if test="deleteStatus != null">
                delete_status,
            </if>
            <if test="wechatOpenId != null">
                wechat_open_id,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="name != null">
                #{name,jdbcType=VARCHAR},
            </if>
            <if test="gender != null">
                #{gender,jdbcType=TINYINT},
            </if>
            <if test="studentIdentity != null">
                #{studentIdentity,jdbcType=VARCHAR},
            </if>
            <if test="studentNo != null">
                #{studentNo,jdbcType=VARCHAR},
            </if>
            <if test="classId != null">
                #{classId,jdbcType=INTEGER},
            </if>
            <if test="schoolId != null">
                #{schoolId,jdbcType=INTEGER},
            </if>
            <if test="parentPhoneNum != null">
                #{parentPhoneNum,jdbcType=VARCHAR},
            </if>
            <if test="parentName != null">
                #{parentName,jdbcType=VARCHAR},
            </if>
            <if test="guardian != null">
                #{guardian,jdbcType=VARCHAR},
            </if>
            <if test="residence != null">
                #{residence,jdbcType=TINYINT},
            </if>
            <if test="schoolShuttle != null">
                #{schoolShuttle,jdbcType=TINYINT},
            </if>
            <if test="deleteStatus != null">
                #{deleteStatus,jdbcType=VARCHAR},
            </if>
            <if test="wechatOpenId != null">
                #{wechatOpenId,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.zaozao.dataobject.StudentDO">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        update student
        <set>
            <if test="name != null">
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="gender != null">
                gender = #{gender,jdbcType=TINYINT},
            </if>
            <if test="studentNo != null">
                student_no = #{studentNo,jdbcType=VARCHAR},
            </if>
            <if test="studentIdentity != null">
                student_identity = #{studentIdentity,jdbcType=VARCHAR},
            </if>
            <if test="classId != null">
                class_id = #{classId,jdbcType=INTEGER},
            </if>
            <if test="schoolId != null">
                school_id = #{schoolId,jdbcType=INTEGER},
            </if>
            <if test="parentPhoneNum != null">
                parent_phone_num = #{parentPhoneNum,jdbcType=VARCHAR},
            </if>
            <if test="parentName != null">
                parent_name = #{parentName,jdbcType=VARCHAR},
            </if>
            <if test="guardian != null">
                guardian = #{guardian,jdbcType=VARCHAR},
            </if>
            <if test="residence != null">
                residence = #{residence,jdbcType=TINYINT},
            </if>
            <if test="schoolShuttle != null">
                school_shuttle = #{schoolShuttle,jdbcType=TINYINT},
            </if>
            <if test="deleteStatus != null">
                delete_status = #{deleteStatus,jdbcType=VARCHAR},
            </if>
            <if test="wechatOpenId != null">
                wechat_open_id = #{wechatOpenId,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.zaozao.dataobject.StudentDO">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 10 15:00:21 CST 2019.
        -->
        update student
        set name = #{name,jdbcType=VARCHAR},
        gender = #{gender,jdbcType=TINYINT},
        student_identity = #{studentIdentity,jdbcType=VARCHAR},
        student_no = #{studentNo,jdbcType=VARCHAR},
        class_id = #{classId,jdbcType=INTEGER},
        school_id = #{schoolId,jdbcType=INTEGER},
        parent_phone_num = #{parentPhoneNum,jdbcType=VARCHAR},
        parent_name = #{parentName,jdbcType=VARCHAR},
        guardian = #{guardian,jdbcType=VARCHAR},
        residence = #{residence,jdbcType=TINYINT},
        school_shuttle = #{schoolShuttle,jdbcType=TINYINT},
        delete_status = #{deleteStatus,jdbcType=VARCHAR},
        wechat_open_id = #{wechatOpenId,jdbcType=VARCHAR}
        where id = #{id,jdbcType=INTEGER}
    </update>

    <update id="updateByStudentNoSelective" parameterType="com.zaozao.dataobject.StudentDO">
        update student
        <set>
            <if test="name != null">
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="gender != null">
                gender = #{gender,jdbcType=TINYINT},
            </if>
            <if test="studentIdentity != null">
                student_identity = #{studentIdentity,jdbcType=VARCHAR},
            </if>
            <if test="studentNo != null">
                student_no = #{studentNo,jdbcType=VARCHAR},
            </if>
            <if test="classId != null">
                class_id = #{classId,jdbcType=INTEGER},
            </if>
            <if test="schoolId != null">
                school_id = #{schoolId,jdbcType=INTEGER},
            </if>
            <if test="parentPhoneNum != null">
                parent_phone_num = #{parentPhoneNum,jdbcType=VARCHAR},
            </if>
            <if test="parentName != null">
                parent_name = #{parentName,jdbcType=VARCHAR},
            </if>
            <if test="guardian != null">
                guardian = #{guardian,jdbcType=VARCHAR},
            </if>
            <if test="residence != null">
                residence = #{residence,jdbcType=TINYINT},
            </if>
            <if test="schoolShuttle != null">
                school_shuttle = #{schoolShuttle,jdbcType=TINYINT},
            </if>
            <if test="deleteStatus != null">
                delete_status = #{deleteStatus,jdbcType=VARCHAR},
            </if>
            <if test="wechatOpenId != null">
                wechat_open_id = #{wechatOpenId,jdbcType=VARCHAR},
            </if>
        </set>
        where student_no = #{studentNo,jdbcType=INTEGER}
    </update>
</mapper>
